name: taskflow-cli - Sprint 1
started: '2025-12-03'
phase: implementing
current_spec: task-add

planning_status: complete

backlog:
  - task-list
  - task-done
  - task-display

specs:
  #=========================================================
  # SPEC: task-storage (COMPLETE)
  #=========================================================
  task-storage:
    status: done
    file: docs/specs/task-storage.md
    appetite: small-medium
    created: '2025-12-03'
    completed: '2025-12-03'
    tasks:
      - id: task-storage-1
        name: Project scaffolding and dependencies
        status: done
        completed: '2025-12-03'

      - id: task-storage-2
        name: Implement loadTasks and saveTasks
        status: done
        completed: '2025-12-03'

      - id: task-storage-3
        name: Implement getNextId and createTask
        status: done
        completed: '2025-12-03'

  #=========================================================
  # SPEC: task-add (IN PROGRESS)
  #=========================================================
  task-add:
    status: done
    completed: '2025-12-03'
    file: docs/specs/task-add.md
    appetite: small
    created: '2025-12-03'
    tasks:
      #-------------------------------------------------
      # Task 1: Add Command Handler
      #-------------------------------------------------
      - id: task-add-1
        name: Create add command with argument parsing
        description: |
          Create the add command handler module with argument parsing,
          validation, and output formatting. This is the core logic.
        files:
          - src/commands/add.js
          - tests/add.test.js
        acceptance_criteria:
          - parseAddArgs() extracts text from first argument
          - parseAddArgs() handles --priority and -p flags
          - parseAddArgs() handles multiple --tag and -t flags
          - validateAddInput() rejects empty/whitespace text
          - validateAddInput() rejects invalid priority values
          - validateAddInput() accepts priority case-insensitively
          - formatOutput() shows task ID, text, priority, and tags
          - runAdd() creates task using storage module
          - runAdd() outputs success message
          - Unit tests cover all parsing and validation cases
        depends_on: []
        estimate: 1.5h
        status: done
        completed: '2025-12-03'

      #-------------------------------------------------
      # Task 2: CLI Integration
      #-------------------------------------------------
      - id: task-add-2
        name: Wire up CLI routing and error handling
        description: |
          Update the CLI entry point to route the "add" command to the
          handler. Add proper error handling and help text.
        files:
          - src/index.js
          - tests/add.test.js
        acceptance_criteria:
          - "tf add" routes to add command handler
          - "tf add --help" shows add command usage
          - Errors display nicely with usage hints
          - Exit codes are correct (0 success, 1 error)
          - Integration test verifies end-to-end flow
        depends_on:
          - task-add-1
        estimate: 1h
        status: done
        completed: '2025-12-03'

notes: |
  task-storage spec COMPLETE (3/3 tasks done)
  task-add spec IN PROGRESS (0/2 tasks)
  
  Total estimate for task-add: 2.5 hours (within 2-3h appetite)
  
  Next step: /implement task-add-1
